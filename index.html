<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>매장 관리 시스템</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>

  <header>
    <h1>매장 관리 시스템</h1>
  </header>

  <nav class="tabs-nav">
    <button class="tab-button active" data-tab="customers">고객 관리</button>
    <button class="tab-button" data-tab="products">재고 관리</button>
    <button class="tab-button" data-tab="sales">판매</button>
  </nav>

  <main>
    <div id="customers-tab" class="tab-content active">
      <h2>고객 관리</h2>
      <div class="customer-controls">
        <div class="search-container">
          <input type="text" id="customer-search-input" placeholder="이름 또는 연락처 (뒷 4자리)로 고객 검색">
        </div>
        <button id="add-customer-btn">새 고객 추가</button>
      </div>
      <customer-list></customer-list>
    </div>
          <div id="products-tab" class="tab-content">
          <h2>재고 관리</h2>
          <div class="product-controls">
            <button id="add-product-btn">새 제품 추가</button>
            <button id="discard-inventory-btn">재고 폐기</button>
            <button id="open-udi-scanner-btn">UDI로 제품 추가</button>
          </div>
          <product-list></product-list>
        </div>    <div id="sales-tab" class="tab-content">
      <h2>판매</h2>
      <sale-transaction-component></sale-transaction-component>
      <sales-list></sales-list>
    </div>
  </main>

  <!-- 고객 폼 모달 -->
  <div id="customer-modal" class="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <customer-form></customer-form>
    </div>
  </div>

  <!-- 제품 폼 모달 -->
  <div id="product-modal" class="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <div id="product-modal-layout">
        <div id="product-form-container">
          <product-form></product-form>
        </div>
        <div id="temp-product-list-container">
          <h3>추가할 제품 목록</h3>
          <div id="temp-product-list"></div>
        </div>
      </div>
      <div class="modal-actions">
        <button id="save-all-products-btn">선택된 제품 모두 저장</button>
      </div>
    </div>
  </div>

  <!-- 브랜드별 제품 목록 모달 -->
  <div id="brand-product-list-modal" class="modal">
    <div class="modal-content large-modal">
      <span class="close-button" id="close-brand-product-list-modal">&times;</span>
      <brand-product-list-modal></brand-product-list-modal>
    </div>
  </div>

  <!-- 재고 폐기 모달 -->
  <div id="discard-inventory-modal" class="modal">
    <div class="modal-content large-modal">
      <span class="close-button" id="close-discard-inventory-modal">&times;</span>
      <discard-inventory-modal></discard-inventory-modal>
    </div>
  </div>

  <!-- UDI 스캐너 모달 -->
  <div id="udi-scanner-modal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="close-udi-scanner-modal">&times;</span>
      <udi-scanner-modal></udi-scanner-modal>
    </div>
  </div>

  <!-- Customer Purchase History Side Panel -->
  <div id="customer-purchase-history-panel" class="side-panel">
    <div class="side-panel-header">
      <h2 class="vertical-text">고객 구매 내역</h2>
    </div>
    <div class="side-panel-content">
      <customer-purchase-history></customer-purchase-history>
    </div>
  </div>

  <!-- Bookmark button for Customer Purchase History -->
  <div id="customer-purchase-history-bookmark" class="bookmark-tab" style="display: none;">
    <button id="toggle-customer-purchase-history-panel" class="bookmark-button">고객 구매 내역</button>
  </div>

  <!-- Abnormal Inventory Side Panel -->
  <div id="abnormal-inventory-panel" class="side-panel">
    <div class="side-panel-header">
      <h2 class="vertical-text">이상 재고</h2>
    </div>
    <div class="side-panel-content">
      <abnormal-inventory-list></abnormal-inventory-list>
    </div>
  </div>

  <!-- Bookmark button for Abnormal Inventory -->
  <div id="abnormal-inventory-bookmark" class="bookmark-tab" style="display: none;">
    <button id="toggle-abnormal-inventory-panel" class="bookmark-button">이상 재고</button>
  </div>

  <footer>
    <p>&copy; 2026 매장 관리 시스템</p>
  </footer>

  <script type="module" src="main.js"></script>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-functions-compat.js"></script>
  <!-- TODO: Add Firebase config here or in app-initializer.js -->
</body>
</html>